"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/**
 * @license 
 * Copyright (c) 2016, Immo Schulz-Gerlach, www.isg-software.de 
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are 
 * permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT 
 * SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, 
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED 
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
 * WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function($){var t="$.fn.setupProgressPie";$.fn.setupProgressPie=function(e){return $(this).each(function(){var r=$(this).data(t);if("object"!==(void 0===r?"undefined":_typeof(r))){var n=$.extend({},$.fn.progressPie.defaults,{update:!0},e);$(this).data(t,n)}else $.extend(r,e)}),this},$.fn.progressPie=function(e){function r(t){return.02*Math.PI*t}function n(t,e){var r=eval,n=r(t);if("function"==typeof n)return n(e);throw"The value of the colorFunctionAttr attribute is NOT a function: "+t}function i(t){var e=eval,r=e(h+"."+t);if("function"==typeof r)return r;throw t+" is not the name of a function in namespace "+h+"!"}function o(t){var e;if("function"==typeof t)e=t;else{if("string"!=typeof t)throw"contentPlugin option must either be a function or the name of a function in the namespace "+h+"!";e=i(t)}return e}function a(t,e){return.02*Math.PI*t*e}function s(t,e,r,n,i,o){var a=$(t),s=a.css("transition");"string"!=typeof s&&(s=""),s.length>0&&(s+=", "),a.css("transition",s+" "+e+" 3s");var u=$(t).data("transitions");u||(u=[],$(t).data("transitions",u)),u.push([e,i])}function u(t){var e=$(t).data("transitions");if(e)for(var r in e){var n=e[r];t.setAttribute(n[0],n[1])}}function l(t,e,n,i,o,l,f,d,p,c,v,g){"number"==typeof n&&(n=Math.min(n,e)),"number"==typeof o&&(o=Math.min(o,e));var h;(f<100||o&&o>0&&o<n||v)&&(h=document.createElementNS(m,"circle"),h.setAttribute("cx",0),h.setAttribute("cy",0),h.setAttribute("r",e-n/2),h.style.stroke="string"==typeof i?i:p,h.style.strokeWidth=n,h.style.fill="none",t.appendChild(h));var y=o||e,b=e-y/2;if(100!==f||v){if(f>0&&f<100||v&&(0===f||100===f)){var A=document.createElementNS(m,"path"),P,S=f;if(v){var C=f-d,R=a(b,C),E=C<0,k,_;E?(S=d,k="0px",_=-R+"px"):(k=R+"px",_="0px");var N=a(b,S);A.setAttribute("stroke-dasharray",N+"px "+N+"px"),A.setAttribute("stroke-dashoffset",k),s(A,"stroke-dashoffset","CSS",k,_,v),l&&0===f&&s(A,"stroke-linecap","CSS","round","butt",v),c&&c!==p&&s(A,"stroke","CSS",c,p,v)}var w=r(S),M=100===S?-1e-5:Math.sin(w)*b,O=Math.cos(w-Math.PI)*b,x=S>50?"1":"0",D="1",T=-b,F="M0,"+T;if(F+=" A"+b+","+b+" 0 "+x+",1 "+M+","+O,A.setAttribute("d",F),A.setAttribute("fill","none"),A.setAttribute("stroke",c||p),A.setAttribute("stroke-width",y),A.setAttribute("stroke-linecap",l&&f>0?"round":"butt"),g){var B=!1===g.clockwise,V="string"==typeof g?g:"string"==typeof g.duration?g.duration:"1s";P=document.createElementNS(m,"animateTransform"),P.setAttribute("attributeName","transform"),P.setAttribute("attributeType","XML"),P.setAttribute("type","rotate"),P.setAttribute("from","0"),P.setAttribute("to",B?"-360":"360"),P.setAttribute("dur",V),P.setAttribute("repeatDur","indefinite"),A.appendChild(P)}t.appendChild(A),window.setTimeout(function(){u(A)},0)}}else h=document.createElementNS(m,"circle"),h.setAttribute("cx",0),h.setAttribute("cy",0),h.setAttribute("r",b),h.style.stroke=p,h.style.strokeWidth=y,h.style.fill=o?"none":p,t.appendChild(h)}function f(t,e){var r;if("string"==typeof e.valueData){if(r=t.data(e.valueData),void 0!==e.valueAttr||void 0!==e.valueSelector)throw"options 'valueData', 'valueAttr' and 'valueSelector' are mutually exclusive, i.e. at least two must be undefined!"}else{if(void 0!==e.valueData)throw"option 'valueData' is not of type 'string'!";if("string"==typeof e.valueAttr){if(r=t.attr(e.valueAttr),void 0!==e.valueSelector)throw"options 'valueAttr' and 'valueSelector' are mutually exclusive, i.e. at least one must be undefined!"}else{if(void 0!==e.valueAttr)throw"option 'valueAttr' is not of type 'string'!";void 0!==e.valueSelector&&(r=$(e.valueSelector,t).text())}}return void 0===r&&(r=t.text()),r}function d(t,e){return Math.max(0,Math.min(100,e.valueAdapter(t)))}function p(t,e){var r=e.mode,n=e.color,i=void 0===n?"undefined":_typeof(n);if("undefined"!==i&&"string"!==i&&"function"!==i)throw"option 'color' has to be either a function or a string, but is of type '"+i+"'!";return"function"===i?r=b.USER_COLOR_FUNC:("undefined"===i&&"string"==typeof e.colorAttr&&(n=t.attr(e.colorAttr)),"string"==typeof n?r=b.USER_COLOR_CONST:"string"==typeof e.colorFunctionAttr&&"string"==typeof(n=t.attr(e.colorFunctionAttr))&&(r=b.DATA_ATTR_FUNC)),{mode:r,color:n}}function c(t,e,r){return t===b.GREY?b.GREY.color:t===b.GREEN?y.colorByPercent(100):t===b.RED?y.colorByPercent(0):t===b.COLOR||void 0===e?y.colorByPercent(r):t===b.USER_COLOR_CONST?e:t===b.USER_COLOR_FUNC?e(r):t===b.DATA_ATTR_FUNC?n(e,r):"black"}var v=$.extend({},$.fn.progressPie.defaults,e),g=void 0===e,m="http://www.w3.org/2000/svg",h="jQuery.fn.progressPie.contentPlugin",y=$.fn.progressPie,b=$.extend({USER_COLOR_CONST:{},USER_COLOR_FUNC:{},DATA_ATTR_FUNC:{}},y.Mode);return $(this).each(function(){var e=$(this),r=v;if(g){var n=$(this).data(t);"object"===(void 0===n?"undefined":_typeof(n))&&(r=n)}var i=$("svg",e);if(!i.length||r.update){i.length&&r.update&&(i.remove(),r.separator="");var a=f(e,r),s=d(a,r),u=e.data($.fn.progressPie.prevValueDataName);if(e.data($.fn.progressPie.prevValueDataName,s),"number"!=typeof u&&(u=0),"function"==typeof r.optionsByPercent){var h=r.optionsByPercent(s);void 0!==h&&null!==h&&(r=$.extend({},r,h),a=f(e,r),s=d(a,r))}var y=p(e,r),b=Math.ceil("number"==typeof r.size?r.size:e.height());0===b&&(b=20),b*=r.sizeFactor;var A=Math.floor(b/2),P=A,S=P,C=document.createElementNS(m,"svg"),R=b;"number"==typeof r.scale&&(R*=r.scale),C.setAttribute("width",R),C.setAttribute("height",R),C.setAttribute("viewBox","-"+P+" -"+P+" "+b+" "+b),C.style.verticalAlign=r.verticalAlign,r.prepend?e.prepend(C,r.separator):e.append(r.separator,C);var E=c(y.mode,y.color,s),k;(!0===r.animateColor||void 0===r.animateColor&&u>0)&&(k=c(y.mode,y.color,u));var _=$.fn.progressPie.smilSupported()?!0===r.animate?$.fn.progressPie.defaultAnimationAttributes:"object"===_typeof(r.animate)?$.extend({},$.fn.progressPie.defaultAnimationAttributes,r.animate):null:null;l(C,P,r.strokeWidth,r.strokeColor,r.ringWidth,r.ringEndsRounded,s,u,E,k,_,r.rotation);var N="number"==typeof r.ringWidth?r.ringWidth:"number"==typeof r.strokeWidth?r.strokeWidth:0;if("object"===_typeof(r.inner)&&(void 0===r.inner.valueAdapter&&(r.inner.valueAdapter=$.fn.progressPie.defaults.valueAdapter),a=f(e,r.inner),s=d(a,r.inner),u=e.data($.fn.progressPie.prevInnerValueDataName),e.data($.fn.progressPie.prevInnerValueDataName,s),"number"!=typeof u&&(u=0),y=p(e,r.inner),P=Math.floor("number"==typeof r.inner.size?r.inner.size*r.sizeFactor/2:.6*P),E=c(y.mode,y.color,s),k=null,(!0===r.inner.animateColor||void 0===r.inner.animateColor&&(!0===r.animateColor||void 0===r.animateColor&&u>0))&&(k=c(y.mode,y.color,u)),l(C,P,0,void 0,r.inner.ringWidth,r.inner.ringEndsRounded,s,u,E,k,_),N="number"==typeof r.inner.ringWidth?r.inner.ringWidth:0),r.contentPlugin){var w=o(r.contentPlugin),M=P;N<P&&(M-=N);var O={newSvgElement:function t(e){var r=document.createElementNS(m,e);return C.appendChild(r),r},newSvgSubelement:function t(e,r){var n=document.createElementNS(m,r);return e.appendChild(n),n},getBackgroundRadius:function t(e){var r=void 0===this.pieOpts.ringWidth||this.fullSize,n=r?this.totalRadius:this.radius;if(!e){n-="number"==typeof this.margin?this.margin:r?this.pieOpts.defaultContentPluginBackgroundMarginFullSize:this.pieOpts.defaultContentPluginBackgroundMarginInsideRing}return n},addBackground:function t(e){if(this.backgroundColor){var r=this.newSvgElement("circle");r.setAttribute("cx","0"),r.setAttribute("cy","0"),r.setAttribute("r",e),r.setAttribute("fill",this.backgroundColor)}},getContentPlugin:o,radius:M,totalRadius:S,color:E,percentValue:s,rawValue:a,pieOpts:r};"object"===_typeof(r.contentPluginOptions)&&$.extend(O,r.contentPluginOptions),w(O)}}}),this},$.fn.progressPie.Mode={GREY:{color:"#888"},RED:{value:200},GREEN:{value:200},COLOR:{}},$.fn.progressPie.colorByPercent=function(t){var e=$.fn.progressPie.Mode.GREEN.value,r=$.fn.progressPie.Mode.RED.value,n=t>50?e:Math.floor(e*t/50);return"rgb("+(t<50?r:Math.floor(r*(100-t)/50))+","+n+",0)"},$.fn.progressPie.smilSupported=function(){return void 0===$.fn.progressPie.smilSupported.cache&&($.fn.progressPie.smilSupported.cache=/SVGAnimate/.test(document.createElementNS("http://www.w3.org/2000/svg","animate").toString())),$.fn.progressPie.smilSupported.cache},$.fn.progressPie.defaults={mode:$.fn.progressPie.Mode.GREY,strokeWidth:2,prepend:!0,separator:"&nbsp;",verticalAlign:"bottom",update:!1,valueAdapter:function t(e){return"string"==typeof e?parseInt(e):"number"==typeof e?e:0},ringEndsRounded:!1,sizeFactor:1,scale:1,defaultContentPluginBackgroundMarginFullSize:0,defaultContentPluginBackgroundMarginInsideRing:1},$.fn.progressPie.defaultAnimationAttributes={dur:"1s",calcMode:"spline",keySplines:"0.23 1 0.32 1",keyTimes:"0;1"},$.fn.progressPie.contentPlugin={},$.fn.progressPie.prevValueDataName="_progresspieSVG_prevValue",$.fn.progressPie.prevInnerValueDataName="_progresspieSVG_prevInnerValue"}(jQuery);